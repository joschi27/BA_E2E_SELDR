class TrackDriveWaypoints:
    def __init__(self):
        self.tracks = self._initialize_tracks()

        self.eval_tracks = self._initialize_eval_tracks()

    def get_track(self, track_index, is_eval_track=False):
        if not is_eval_track:
            if track_index < 0 or track_index >= len(self.tracks):
                print("###### Track index out of range - setting to 0! ########")
                track_index = 0
            track = self.tracks[track_index]
        else:
            track = self.eval_tracks[track_index]

        absolute_start_position = track["absolute_start_position"]
        stop_position = track["stop_position"]
        waypoint_and_rotation = track["waypoint_and_rotation"]

        waypoints = [x[0] for x in waypoint_and_rotation]
        # Subtract the absolute start position to get relative waypoints
        waypoints = [(w[0] - absolute_start_position[0][0], w[1] - absolute_start_position[0][1]) for w
                     in waypoints]
        rotations = [x[1] for x in waypoint_and_rotation]

        # create relative stop position
        stop_position = (
        (stop_position[0][0] - absolute_start_position[0][0], stop_position[0][1] - absolute_start_position[0][1]),
        stop_position[1])

        return waypoints, rotations, stop_position

    def _initialize_tracks(self):
        return [
            {
                "absolute_start_position": ((52.1, 338.6), 180.0),
                "stop_position": ((52.1, 349.3), 180.0),
                "waypoint_and_rotation": [
                    ((52.3, 349.8), 179.1),
                    ((50.6, 354.7), 219.7),
                    ((48.0, 359.2), 189.1),
                    ((49.1, 364.2), 143.2),
                    ((54.5, 368.5), 122.3),
                    ((62.0, 373.2), 122.0),
                    ((67.7, 376.9), 125.9),
                    ((73.0, 379.4), 102.7),
                    ((78.6, 378.7), 64.4),
                    ((81.5, 376.6), 42.9),
                    ((82.8, 373.9), 351.1),
                    ((81.4, 370.9), 296.8),
                    ((77.4, 371.5), 238.7),
                    ((74.0, 373.0), 267.2),
                    ((70.5, 371.6), 314.9),
                    ((68.3, 368.0), 315.1),
                    ((64.9, 367.1), 265.6),
                    ((61.4, 365.6), 321.0),
                    ((61.6, 360.0), 14.4),
                    ((63.3, 353.3), 14.2),
                    ((65.1, 343.2), 5.9),
                    ((66.5, 335.3), 22.0),
                    ((69.7, 329.0), 22.3),
                    ((68.2, 321.8), 321.0),
                    ((65.7, 320.2), 284.8),
                    ((61.2, 319.8), 270.0),
                    ((46.8, 320.3), 266.8),
                    ((38.1, 320.2), 283.3),
                    ((30.7, 319.1), 270.3),
                    ((26.4, 320.7), 218.5),
                    ((24.8, 324.6), 178.7),
                    ((27.0, 327.8), 122.6),
                    ((33.2, 328.5), 91.6),
                    ((41.6, 328.6), 90.7),
                    ((47.8, 330.3), 125.9),
                    ((51.0, 334.2), 154.9),
                    ((52.3, 340.3), 174.5),
                ]
            },
            {
                "absolute_start_position": ((103.1, 323.8), 225.0),
                "stop_position": ((96.0, 331.6), 217.0),
                "waypoint_and_rotation": [
                    ((99.4, 327.5), 224.3),
                    ((95.6, 332.3), 207.7),
                    ((95.3, 335.7), 172.5),
                    ((95.0, 339.6), 219.6),
                    ((93.1, 340.9), 243.1),
                    ((90.8, 344.9), 152.2),
                    ((92.4, 348.4), 184.5),
                    ((90.9, 355.1), 200.7),
                    ((87.8, 361.6), 215.3),
                    ((84.0, 364.6), 251.3),
                    ((79.1, 364.8), 279.5),
                    ((74.0, 362.2), 308.9),
                    ((71.9, 358.1), 345.1),
                    ((71.5, 350.8), 15.5),
                    ((74.5, 344.0), 36.3),
                    ((77.8, 340.2), 44.4),
                    ((80.0, 334.8), 11.1),
                    ((80.0, 330.1), 339.6),
                    ((76.4, 321.6), 334.9),
                    ((75.6, 317.6), 16.0),
                    ((79.4, 315.2), 87.6),
                    ((85.3, 315.1), 89.9),
                    ((104.8, 315.1), 90.1),
                    ((112.1, 315.1), 90.6),
                    ((117.3, 316.4), 142.5),
                    ((117.6, 319.2), 187.0),
                    ((115.4, 323.1), 222.7),
                    ((112.4, 325.3), 264.4),
                    ((105.3, 324.0), 276.4),
                    ((101.5, 325.4), 226.6),
                ]
            },
            {
                "absolute_start_position": ((143.4, 327.2), 145.0),
                "stop_position": ((151.0, 337.8), 144.0),
                "waypoint_and_rotation": [
                    ((146.3, 331.1), 144.1),
                    ((150.0, 336.4), 144.4),
                    ((154.4, 341.4), 117.9),
                    ((158.0, 341.9), 79.5),
                    ((161.9, 340.0), 51.8),
                    ((166.8, 335.7), 48.9),
                    ((170.7, 334.2), 94.9),
                    ((173.9, 335.9), 146.8),
                    ((174.5, 340.0), 177.8),
                    ((175.9, 344.5), 142.3),
                    ((179.6, 345.8), 94.1),
                    ((183.0, 346.8), 119.6),
                    ((187.0, 349.6), 119.0),
                    ((190.1, 350.6), 102.8),
                    ((193.5, 353.0), 158.1),
                    ((192.8, 357.1), 218.1),
                    ((189.9, 358.5), 260.6),
                    ((186.3, 358.1), 281.3),
                    ((178.8, 355.9), 290.3),
                    ((171.5, 352.8), 294.6),
                    ((165.1, 351.3), 276.0),
                    ((156.3, 350.2), 278.6),
                    ((145.5, 348.3), 272.7),
                    ((138.2, 348.0), 273.6),
                    ((128.4, 346.2), 296.6),
                    ((122.3, 340.9), 327.5),
                    ((120.4, 334.7), 355.6),
                    ((121.6, 328.2), 29.1),
                    ((126.0, 321.5), 41.0),
                    ((133.5, 315.8), 71.5),
                    ((140.3, 315.4), 115.4),
                    ((142.8, 319.3), 166.5),
                    ((143.7, 326.0), 162.2),
                ]
            },
            {
                "absolute_start_position": ((173.2, 276.8), 350.0),
                "stop_position": ((172.4, 267.8), 0.5),
                "waypoint_and_rotation": [
                    ((172.6, 272.0), 353.7),
                    ((172.8, 267.0), 10.7),
                    ((174.1, 261.8), 6.7),
                    ((173.3, 258.3), 334.2),
                    ((169.7, 254.2), 296.1),
                    ((164.2, 252.0), 278.6),
                    ((157.8, 253.4), 231.3),
                    ((155.0, 258.1), 190.1),
                    ((155.7, 264.2), 150.8),
                    ((161.6, 268.2), 111.4),
                    ((165.0, 271.0), 152.2),
                    ((165.2, 274.5), 193.8),
                    ((163.0, 276.4), 282.2),
                    ((158.0, 273.8), 306.6),
                    ((145.2, 263.0), 313.2),
                    ((135.2, 254.7), 304.2),
                    ((130.1, 252.1), 280.0),
                    ((125.0, 253.0), 235.8),
                    ((121.4, 257.2), 205.7),
                    ((120.7, 263.4), 157.0),
                    ((125.0, 268.5), 116.6),
                    ((131.0, 269.6), 78.1),
                    ((136.2, 268.1), 78.2),
                    ((138.7, 269.6), 133.7),
                    ((141.4, 273.6), 151.7),
                    ((144.9, 278.2), 130.0),
                    ((148.4, 280.6), 122.8),
                    ((151.2, 283.9), 160.6),
                    ((151.9, 288.3), 154.3),
                    ((155.1, 291.7), 120.3),
                    ((158.6, 292.5), 90.9),
                    ((173.7, 292.3), 84.3),
                    ((178.3, 290.0), 37.5),
                    ((180.0, 285.0), 356.6),
                    ((177.8, 281.2), 307.5),
                    ((174.0, 277.8), 330.1),
                ]
            },
            {
                "absolute_start_position": ((180.4, 237.6), 270.0),
                "stop_position": ((170.2, 237.7), 266.1),
                "waypoint_and_rotation": [
                    ((176.1, 237.5), 269.7),
                    ((169.4, 237.7), 262.1),
                    ((159.3, 240.1), 257.1),
                    ((151.4, 240.7), 270.6),
                    ((144.0, 240.1), 280.5),
                    ((139.7, 237.9), 311.3),
                    ((135.1, 231.9), 331.3),
                    ((133.4, 226.5), 353.4),
                    ((132.8, 217.0), 358.2),
                    ((132.7, 205.7), 1.5),
                    ((133.3, 199.2), 348.4),
                    ((132.1, 195.0), 341.7),
                    ((132.3, 191.2), 21.4),
                    ((134.9, 188.1), 57.2),
                    ((136.7, 187.8), 85.3),
                    ((140.1, 188.8), 122.4),
                    ((145.0, 191.4), 103.8),
                    ((148.4, 190.6), 58.5),
                    ((153.1, 188.3), 78.4),
                    ((156.8, 188.3), 100.0),
                    ((164.8, 189.6), 91.1),
                    ((174.5, 189.3), 85.1),
                    ((182.8, 190.3), 112.9),
                    ((187.5, 193.8), 138.7),
                    ((190.0, 198.7), 165.0),
                    ((190.9, 207.5), 178.8),
                    ((191.1, 226.5), 178.8),
                    ((190.2, 233.6), 208.4),
                    ((186.6, 237.6), 246.3),
                    ((182.8, 238.0), 275.2),
                ]
            },
            {
                "absolute_start_position": ((234.5, 346.8), 270.0),
                "stop_position": ((223.4, 346.8), 270.7),
                "waypoint_and_rotation": [
                    ((229.5, 346.8), 268.1),
                    ((223.3, 346.5), 275.9),
                    ((216.2, 344.4), 299.5),
                    ((213.3, 344.2), 270.0),
                    ((208.7, 345.1), 242.9),
                    ((204.6, 349.0), 212.9),
                    ((202.4, 354.5), 192.9),
                    ((202.1, 365.6), 172.6),
                    ((204.3, 374.9), 160.7),
                    ((209.5, 382.6), 136.2),
                    ((216.1, 387.7), 109.5),
                    ((221.8, 388.9), 90.0),
                    ((229.5, 387.9), 68.6),
                    ((237.1, 382.5), 41.7),
                    ((239.9, 377.3), 14.9),
                    ((240.6, 371.3), 354.5),
                    ((239.3, 365.2), 326.1),
                    ((235.7, 362.9), 277.7),
                    ((231.7, 364.0), 234.6),
                    ((228.6, 367.8), 212.0),
                    ((224.9, 371.0), 248.5),
                    ((221.3, 370.8), 315.9),
                    ((219.1, 366.1), 359.2),
                    ((220.6, 361.6), 34.6),
                    ((225.8, 357.2), 63.9),
                    ((231.1, 355.7), 86.4),
                    ((237.1, 355.4), 87.4),
                    ((249.0, 355.1), 91.4),
                    ((259.9, 355.3), 90.9),
                    ((268.2, 354.6), 63.8),
                    ((271.3, 351.4), 20.4),
                    ((271.6, 346.3), 337.0),
                    ((268.7, 342.3), 319.3),
                    ((263.4, 337.3), 307.1),
                    ((258.8, 334.8), 281.7),
                    ((254.7, 334.1), 285.3),
                    ((248.5, 332.7), 265.6),
                    ((244.9, 334.3), 234.9),
                    ((242.9, 337.3), 194.5),
                    ((241.6, 341.9), 201.3),
                    ((238.2, 344.9), 235.1),
                    ((232.5, 346.6), 266.4),
                ]
            },
            {
                "absolute_start_position": ((115.7, 285.8), 270.0),
                "stop_position": ((108.4, 285.5), 279.7),
                "waypoint_and_rotation": [
                    ((105.9, 284.8), 284.4),
                    ((102.1, 282.9), 309.5),
                    ((97.5, 279.7), 288.1),
                    ((93.6, 279.6), 256.9),
                    ((87.2, 282.6), 239.7),
                    ((79.3, 287.5), 236.7),
                    ((72.8, 291.7), 246.4),
                    ((62.4, 292.8), 289.6),
                    ((57.7, 289.3), 335.1),
                    ((56.3, 282.0), 358.7),
                    ((56.0, 273.3), 358.3),
                    ((56.3, 256.5), 25.8),
                    ((62.4, 250.3), 67.9),
                    ((69.2, 249.4), 104.4),
                    ((76.2, 253.9), 154.2),
                    ((80.7, 263.1), 153.5),
                    ((84.0, 267.6), 126.9),
                    ((91.0, 271.5), 96.6),
                    ((98.2, 270.6), 57.0),
                    ((104.6, 266.0), 54.9),
                    ((109.4, 264.2), 86.1),
                    ((114.7, 267.1), 147.4),
                    ((119.5, 276.4), 156.1),
                    ((120.6, 282.9), 212.3),
                    ((115.3, 285.8), 271.0),
                ]
            },
            {
                "absolute_start_position": ((115.7, 412.0), 270.0),
                "stop_position": ((104.9, 412.0), 269.6),
                "waypoint_and_rotation": [
                    ((103.2, 412.0), 269.6),
                    ((97.5, 413.2), 240.2),
                    ((93.8, 417.1), 209.2),
                    ((91.6, 422.9), 188.8),
                    ((92.0, 429.9), 153.5),
                    ((95.5, 433.1), 111.0),
                    ((101.3, 434.2), 91.2),
                    ((109.8, 434.2), 90.3),
                    ((117.0, 434.2), 89.8),
                    ((124.8, 434.2), 89.8),
                    ((130.5, 434.0), 78.3),
                    ((134.5, 430.8), 21.0),
                    ((134.1, 426.5), 327.6),
                    ((130.6, 424.7), 273.8),
                    ((125.2, 425.4), 249.0),
                    ((119.3, 427.7), 247.9),
                    ((115.3, 429.4), 259.8),
                    ((107.7, 429.6), 275.2),
                    ((104.1, 428.3), 302.2),
                    ((101.9, 424.6), 344.5),
                    ((103.3, 420.0), 41.8),
                    ((110.1, 417.4), 85.5),
                    ((116.5, 418.5), 107.8),
                    ((123.4, 419.7), 86.3),
                    ((128.1, 418.4), 64.5),
                    ((135.2, 413.6), 51.5),
                    ((140.8, 404.4), 9.1),
                    ((138.8, 395.2), 323.6),
                    ((131.9, 389.9), 284.7),
                    ((122.9, 391.0), 234.9),
                    ((119.1, 396.4), 184.3),
                    ((120.9, 400.7), 133.1),
                    ((124.7, 406.1), 175.0),
                    ((122.9, 410.1), 234.2),
                    ((117.2, 411.9), 269.2),
                ]
            }
        ]

    def _initialize_eval_tracks(self):
        return [
            {
                "absolute_start_position": ((70.8, 373.2), 180.0),
                "stop_position": ((70.9, 383.6), 179.4),
                "waypoint_and_rotation": [
                    ((71.1, 387.9), 171.8),
                    ((75.4, 395.4), 121.1),
                    ((84.7, 398.2), 82.4),
                    ((92.6, 394.5), 56.1),
                    ((100.9, 387.3), 42.5),
                    ((106.0, 385.3), 95.7),
                    ((111.0, 390.6), 193.2),
                    ((106.2, 400.1), 200.8),
                    ((102.5, 407.0), 239.2),
                    ((94.3, 408.5), 231.7),
                    ((91.1, 414.5), 191.2),
                    ((89.1, 419.9), 220.1),
                    ((82.5, 422.6), 270.5),
                    ((74.4, 420.8), 298.1),
                    ((67.7, 415.8), 314.6),
                    ((58.2, 406.0), 315.6),
                    ((49.7, 400.6), 290.3),
                    ((43.9, 395.8), 333.0),
                    ((39.8, 385.2), 353.8),
                    ((39.2, 370.7), 0.1),
                    ((43.1, 363.8), 57.8),
                    ((47.9, 363.8), 122.6),
                    ((51.1, 369.0), 161.7),
                    ((56.1, 374.8), 90.9),
                    ((61.7, 370.4), 6.3),
                    ((57.8, 360.0), 348.3),
                    ((59.4, 352.1), 34.9),
                    ((66.4, 347.6), 94.3),
                    ((75.1, 353.4), 160.1),
                    ((73.7, 359.5), 201.5),
                    ((71.0, 371.7), 181.6),
                ]
            }]